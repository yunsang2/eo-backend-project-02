<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IMPRINT / API Console</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

        :root {
            --bg: #0d0f14;
            --panel: #12151c;
            --card: #181c26;
            --border: #252a38;
            --border-bright: #2e3547;
            --text: #c8d0e0;
            --text-dim: #5a6478;
            --text-muted: #3a4155;
            --accent: #4af2a1;
            --accent-dim: #1a4a35;
            --red: #f25a5a;
            --red-dim: #3a1a1a;
            --yellow: #f2c94c;
            --blue: #5ab4f2;
            --purple: #a78bfa;
            --label: #7e8fa8;
            --input-bg: #0d0f14;
            --scrollbar: #252a38;
        }

        html, body { height: 100%; overflow: hidden; }

        body {
            font-family: 'JetBrains Mono', monospace;
            background: var(--bg);
            color: var(--text);
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        /* HEADER */
        header {
            height: 44px;
            background: var(--panel);
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            padding: 0 20px;
            gap: 12px;
            flex-shrink: 0;
        }
        .logo {
            font-family: 'Space Mono', monospace;
            font-size: 13px;
            font-weight: 700;
            color: var(--accent);
            letter-spacing: 0.1em;
        }
        .logo span { color: var(--text-dim); }
        .header-tag {
            font-size: 10px;
            color: var(--text-muted);
            border: 1px solid var(--border);
            padding: 2px 7px;
            border-radius: 3px;
            letter-spacing: 0.08em;
        }
        .header-status {
            margin-left: auto;
            font-size: 10px;
            color: var(--text-dim);
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .status-dot {
            width: 6px; height: 6px;
            background: var(--accent);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.3} }

        /* MAIN SPLIT */
        .workspace {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        /* LEFT PANEL */
        .left-panel {
            width: 50%;
            border-right: 1px solid var(--border);
            overflow-y: auto;
            padding: 20px;
        }
        .left-panel-inner {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        /* RIGHT PANEL - CONSOLE */
        .right-panel {
            width: 50%;
            display: flex;
            flex-direction: column;
            background: var(--bg);
        }
        .console-header {
            padding: 10px 16px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 8px;
            flex-shrink: 0;
            background: var(--panel);
        }
        .console-title {
            font-size: 11px;
            color: var(--text-dim);
            letter-spacing: 0.1em;
            text-transform: uppercase;
        }
        .console-actions {
            margin-left: auto;
            display: flex;
            gap: 6px;
        }
        .btn-clear {
            font-family: 'JetBrains Mono', monospace;
            font-size: 10px;
            color: var(--text-dim);
            background: transparent;
            border: 1px solid var(--border);
            padding: 3px 8px;
            cursor: pointer;
            border-radius: 3px;
            transition: all 0.15s;
        }
        .btn-clear:hover { border-color: var(--red); color: var(--red); }

        .console-body {
            flex: 1;
            overflow-y: auto;
            padding: 12px 16px;
            font-size: 11px;
            line-height: 1.7;
        }

        /* LOG ENTRIES */
        .log-entry {
            margin-bottom: 10px;
            border-left: 2px solid var(--border);
            padding-left: 10px;
            animation: fadeIn 0.2s ease;
        }
        @keyframes fadeIn { from{opacity:0;transform:translateY(4px)} to{opacity:1;transform:translateY(0)} }

        .log-entry.success { border-left-color: var(--accent); }
        .log-entry.error   { border-left-color: var(--red); }
        .log-entry.info    { border-left-color: var(--blue); }
        .log-entry.pending { border-left-color: var(--yellow); }

        .log-time { color: var(--text-muted); font-size: 10px; }
        .log-method {
            font-size: 10px; font-weight: 700; letter-spacing: 0.05em;
            padding: 1px 5px; border-radius: 2px; margin: 0 4px;
        }
        .method-post { background: #1a3a20; color: #4af2a1; }
        .method-get  { background: #1a2a4a; color: #5ab4f2; }
        .method-put  { background: #3a2a10; color: #f2c94c; }
        .method-del  { background: #3a1a1a; color: #f25a5a; }

        .log-url { color: var(--text-dim); }
        .log-status-ok  { color: var(--accent); font-weight: 600; }
        .log-status-err { color: var(--red); font-weight: 600; }

        .log-body {
            margin-top: 4px;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 4px;
            padding: 8px 10px;
            white-space: pre-wrap;
            word-break: break-all;
            font-size: 10px;
            color: var(--text);
            max-height: 200px;
            overflow-y: auto;
        }
        .log-body.ok-body  { border-color: var(--accent-dim); background: #0d1a12; }
        .log-body.err-body { border-color: var(--red-dim); background: #180d0d; }

        /* SECTION HEADERS */
        .section-label {
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: var(--text-muted);
            padding: 4px 0 2px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .section-label::after {
            content: '';
            flex: 1;
            height: 1px;
            background: var(--border);
        }
        .section-label .sec-icon { color: var(--purple); }

        /* CARDS */
        .card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 6px;
            overflow: hidden;
            transition: border-color 0.2s;
        }
        .card:hover { border-color: var(--border-bright); }

        .card-head {
            padding: 9px 14px;
            background: var(--panel);
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            user-select: none;
        }
        .card-head:hover { background: #1a1f2e; }
        .card-method-badge {
            font-size: 9px;
            font-weight: 700;
            padding: 2px 6px;
            border-radius: 3px;
            letter-spacing: 0.06em;
        }
        .badge-post { background: var(--accent-dim); color: var(--accent); }
        .badge-get  { background: #1a2a4a; color: var(--blue); }
        .badge-put  { background: #3a2a10; color: var(--yellow); }
        .badge-del  { background: var(--red-dim); color: var(--red); }

        .card-title {
            font-size: 12px;
            color: var(--text);
            font-weight: 500;
        }
        .card-path {
            font-size: 10px;
            color: var(--text-dim);
            margin-left: auto;
        }
        .card-toggle {
            font-size: 10px;
            color: var(--text-muted);
            transition: transform 0.2s;
        }
        .card-toggle.open { transform: rotate(90deg); }

        .card-body {
            padding: 14px;
            display: none;
            flex-direction: column;
            gap: 10px;
        }
        .card-body.visible { display: flex; }

        /* INPUTS */
        .field { display: flex; flex-direction: column; gap: 4px; }
        .field label {
            font-size: 10px;
            color: var(--label);
            letter-spacing: 0.06em;
            text-transform: uppercase;
        }
        .field input, .field textarea, .field select {
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
            background: var(--input-bg);
            border: 1px solid var(--border);
            border-radius: 4px;
            color: var(--text);
            padding: 7px 10px;
            outline: none;
            transition: border-color 0.15s;
            width: 100%;
        }
        .field input:focus, .field textarea:focus, .field select:focus {
            border-color: var(--accent);
        }
        .field textarea { min-height: 60px; resize: vertical; }

        .row { display: flex; gap: 8px; }
        .row .field { flex: 1; }

        /* SUBMIT BUTTON */
        .btn-submit {
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
            font-weight: 600;
            padding: 8px 14px;
            background: transparent;
            border: 1px solid var(--accent);
            color: var(--accent);
            cursor: pointer;
            border-radius: 4px;
            letter-spacing: 0.05em;
            transition: all 0.15s;
            display: flex;
            align-items: center;
            gap: 6px;
            align-self: flex-start;
        }
        .btn-submit:hover { background: var(--accent-dim); }
        .btn-submit.loading { opacity: 0.5; pointer-events: none; }
        .btn-submit.del { border-color: var(--red); color: var(--red); }
        .btn-submit.del:hover { background: var(--red-dim); }
        .btn-submit.put { border-color: var(--yellow); color: var(--yellow); }
        .btn-submit.put:hover { background: #3a2a10; }

        /* SCROLLBARS */
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: var(--scrollbar); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--border-bright); }

        /* EMPTY CONSOLE */
        .console-empty {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: var(--text-muted);
            font-size: 12px;
            gap: 8px;
        }
        .console-empty .big { font-size: 28px; }
        .note {
            font-size: 10px;
            color: var(--text-muted);
            padding: 4px 0;
            font-style: italic;
        }
    </style>
</head>
<body>

<header>
    <div class="logo">IMPRINT<span>/</span>API</div>
    <div class="header-tag">CONSOLE v1.0</div>
    <div class="header-tag">Spring Security</div>
    <div class="header-status">
        <div class="status-dot"></div>
        READY
    </div>
</header>

<div class="workspace">

    <!-- ======================== LEFT PANEL ======================== -->
    <div class="left-panel" id="leftPanel"><div class="left-panel-inner">

        <!-- 1. AUTH -->
        <div class="section-label"><span class="sec-icon">▸</span> 01 &nbsp;AUTHENTICATION</div>

        <!-- LOGIN -->
        <div class="card">
            <div class="card-head" onclick="toggle(this)">
                <span class="card-method-badge badge-post">POST</span>
                <span class="card-title">로그인</span>
                <span class="card-path">/login</span>
                <span class="card-toggle">▶</span>
            </div>
            <div class="card-body">
                <div class="note">※ Spring Security formLogin — application/x-www-form-urlencoded 전송</div>
                <div class="field"><label>Username (이메일)</label><input id="login-username" type="email" placeholder="user@example.com"></div>
                <div class="field"><label>Password</label><input id="login-password" type="password" placeholder="••••••••"></div>
                <button class="btn-submit" onclick="doLogin()">▶ &nbsp;RUN</button>
            </div>
        </div>

        <!-- LOGOUT -->
        <div class="card">
            <div class="card-head" onclick="toggle(this)">
                <span class="card-method-badge badge-post">POST</span>
                <span class="card-title">로그아웃</span>
                <span class="card-path">/logout</span>
                <span class="card-toggle">▶</span>
            </div>
            <div class="card-body">
                <div class="note">※ Spring Security formLogin logout — form 전송</div>
                <button class="btn-submit del" onclick="doLogout()">▶ &nbsp;RUN</button>
            </div>
        </div>

        <!-- 2. MAIL -->
        <div class="section-label"><span class="sec-icon">▸</span> 02 &nbsp;MAIL</div>

        <!-- SEND MAIL -->
        <div class="card">
            <div class="card-head" onclick="toggle(this)">
                <span class="card-method-badge badge-post">POST</span>
                <span class="card-title">인증번호 발송</span>
                <span class="card-path">/api/mail/send</span>
                <span class="card-toggle">▶</span>
            </div>
            <div class="card-body">
                <div class="field"><label>Email</label><input id="mail-send-email" type="email" placeholder="user@example.com"></div>
                <button class="btn-submit" onclick="sendMail()">▶ &nbsp;RUN</button>
            </div>
        </div>

        <!-- VERIFY MAIL -->
        <div class="card">
            <div class="card-head" onclick="toggle(this)">
                <span class="card-method-badge badge-post">POST</span>
                <span class="card-title">인증번호 확인</span>
                <span class="card-path">/api/mail/verify</span>
                <span class="card-toggle">▶</span>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="field"><label>Email</label><input id="mail-verify-email" type="email" placeholder="user@example.com"></div>
                    <div class="field"><label>Code</label><input id="mail-verify-code" type="text" placeholder="123456"></div>
                </div>
                <button class="btn-submit" onclick="verifyMail()">▶ &nbsp;RUN</button>
            </div>
        </div>

        <!-- 3. USER -->
        <div class="section-label"><span class="sec-icon">▸</span> 03 &nbsp;USER / ACCOUNT</div>

        <!-- SIGNUP -->
        <div class="card">
            <div class="card-head" onclick="toggle(this)">
                <span class="card-method-badge badge-post">POST</span>
                <span class="card-title">회원가입</span>
                <span class="card-path">/account/signup</span>
                <span class="card-toggle">▶</span>
            </div>
            <div class="card-body">
                <div class="field"><label>Body (JSON)</label>
                    <textarea id="signup-body">{
  "email": "user@example.com",
  "password": "password123",
  "nickname": "홍길동"
}</textarea>
                </div>
                <button class="btn-submit" onclick="signup()">▶ &nbsp;RUN</button>
            </div>
        </div>

        <!-- MY INFO -->
        <div class="card">
            <div class="card-head" onclick="toggle(this)">
                <span class="card-method-badge badge-get">GET</span>
                <span class="card-title">내 정보 조회</span>
                <span class="card-path">/account/user</span>
                <span class="card-toggle">▶</span>
            </div>
            <div class="card-body">
                <div class="note">※ 로그인 세션 필요</div>
                <button class="btn-submit" onclick="getMyInfo()">▶ &nbsp;RUN</button>
            </div>
        </div>

        <!-- SEND RESET LINK -->
        <div class="card">
            <div class="card-head" onclick="toggle(this)">
                <span class="card-method-badge badge-post">POST</span>
                <span class="card-title">비밀번호 재설정 링크 발송</span>
                <span class="card-path">/account/password/send-link</span>
                <span class="card-toggle">▶</span>
            </div>
            <div class="card-body">
                <div class="field"><label>Email</label><input id="pw-reset-email" type="email" placeholder="user@example.com"></div>
                <button class="btn-submit" onclick="sendResetLink()">▶ &nbsp;RUN</button>
            </div>
        </div>

        <!-- RESET PASSWORD -->
        <div class="card">
            <div class="card-head" onclick="toggle(this)">
                <span class="card-method-badge badge-post">POST</span>
                <span class="card-title">비밀번호 재설정</span>
                <span class="card-path">/account/password/reset</span>
                <span class="card-toggle">▶</span>
            </div>
            <div class="card-body">
                <div class="field"><label>Token</label><input id="pw-reset-token" type="text" placeholder="reset-token-from-email"></div>
                <div class="field"><label>New Password</label><input id="pw-reset-newpw" type="password" placeholder="새 비밀번호"></div>
                <button class="btn-submit" onclick="resetPassword()">▶ &nbsp;RUN</button>
            </div>
        </div>

        <!-- 4. BOARD -->
        <div class="section-label"><span class="sec-icon">▸</span> 04 &nbsp;BOARD</div>

        <!-- CREATE BOARD -->
        <div class="card">
            <div class="card-head" onclick="toggle(this)">
                <span class="card-method-badge badge-post">POST</span>
                <span class="card-title">게시판 생성</span>
                <span class="card-path">/boards</span>
                <span class="card-toggle">▶</span>
            </div>
            <div class="card-body">
                <div class="field"><label>Body (JSON)</label>
                    <textarea id="board-create-body">{
  "name": "자유게시판",
  "description": "자유롭게 이야기하는 공간입니다."
}</textarea>
                </div>
                <button class="btn-submit" onclick="createBoard()">▶ &nbsp;RUN</button>
            </div>
        </div>

        <!-- GET ALL BOARDS -->
        <div class="card">
            <div class="card-head" onclick="toggle(this)">
                <span class="card-method-badge badge-get">GET</span>
                <span class="card-title">게시판 목록 조회</span>
                <span class="card-path">/boards</span>
                <span class="card-toggle">▶</span>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="field"><label>Page</label><input id="board-list-page" type="number" value="1" min="1"></div>
                    <div class="field"><label>Size</label><input id="board-list-size" type="number" value="10" min="1"></div>
                </div>
                <button class="btn-submit" onclick="getBoardList()">▶ &nbsp;RUN</button>
            </div>
        </div>

        <!-- GET ONE BOARD -->
        <div class="card">
            <div class="card-head" onclick="toggle(this)">
                <span class="card-method-badge badge-get">GET</span>
                <span class="card-title">게시판 단건 조회</span>
                <span class="card-path">/boards/{id}</span>
                <span class="card-toggle">▶</span>
            </div>
            <div class="card-body">
                <div class="field"><label>Board ID</label><input id="board-get-id" type="number" placeholder="1"></div>
                <button class="btn-submit" onclick="getBoard()">▶ &nbsp;RUN</button>
            </div>
        </div>

        <!-- UPDATE BOARD -->
        <div class="card">
            <div class="card-head" onclick="toggle(this)">
                <span class="card-method-badge badge-put">PUT</span>
                <span class="card-title">게시판 수정</span>
                <span class="card-path">/boards/{id}</span>
                <span class="card-toggle">▶</span>
            </div>
            <div class="card-body">
                <div class="field"><label>Board ID</label><input id="board-update-id" type="number" placeholder="1"></div>
                <div class="field"><label>Body (JSON)</label>
                    <textarea id="board-update-body">{
  "name": "수정된 게시판 이름",
  "description": "수정된 설명"
}</textarea>
                </div>
                <button class="btn-submit put" onclick="updateBoard()">▶ &nbsp;RUN</button>
            </div>
        </div>

        <!-- DELETE BOARD -->
        <div class="card">
            <div class="card-head" onclick="toggle(this)">
                <span class="card-method-badge badge-del">DEL</span>
                <span class="card-title">게시판 삭제</span>
                <span class="card-path">/boards/{id}</span>
                <span class="card-toggle">▶</span>
            </div>
            <div class="card-body">
                <div class="field"><label>Board ID</label><input id="board-del-id" type="number" placeholder="1"></div>
                <button class="btn-submit del" onclick="deleteBoard()">▶ &nbsp;RUN</button>
            </div>
        </div>

        <!-- BOARD MANAGER -->
        <div class="card">
            <div class="card-head" onclick="toggle(this)">
                <span class="card-method-badge badge-get">GET</span>
                <span class="card-title">매니저 목록 조회</span>
                <span class="card-path">/boards/{id}/manager</span>
                <span class="card-toggle">▶</span>
            </div>
            <div class="card-body">
                <div class="field"><label>Board ID</label><input id="board-mgr-list-id" type="number" placeholder="1"></div>
                <button class="btn-submit" onclick="getManagers()">▶ &nbsp;RUN</button>
            </div>
        </div>

        <div class="card">
            <div class="card-head" onclick="toggle(this)">
                <span class="card-method-badge badge-post">POST</span>
                <span class="card-title">매니저 추가</span>
                <span class="card-path">/boards/{id}/manager</span>
                <span class="card-toggle">▶</span>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="field"><label>Board ID</label><input id="board-mgr-add-board" type="number" placeholder="1"></div>
                    <div class="field"><label>User ID</label><input id="board-mgr-add-user" type="number" placeholder="2"></div>
                </div>
                <button class="btn-submit" onclick="addManager()">▶ &nbsp;RUN</button>
            </div>
        </div>

        <div class="card">
            <div class="card-head" onclick="toggle(this)">
                <span class="card-method-badge badge-del">DEL</span>
                <span class="card-title">매니저 제외</span>
                <span class="card-path">/boards/{id}/manager</span>
                <span class="card-toggle">▶</span>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="field"><label>Board ID</label><input id="board-mgr-del-board" type="number" placeholder="1"></div>
                    <div class="field"><label>User ID</label><input id="board-mgr-del-user" type="number" placeholder="2"></div>
                </div>
                <button class="btn-submit del" onclick="removeManager()">▶ &nbsp;RUN</button>
            </div>
        </div>

        <!-- 5. POST -->
        <div class="section-label"><span class="sec-icon">▸</span> 05 &nbsp;POST</div>

        <!-- WRITE POST -->
        <div class="card">
            <div class="card-head" onclick="toggle(this)">
                <span class="card-method-badge badge-post">POST</span>
                <span class="card-title">게시물 작성</span>
                <span class="card-path">/boards/{boardId}/posts</span>
                <span class="card-toggle">▶</span>
            </div>
            <div class="card-body">
                <div class="field"><label>Board ID</label><input id="post-write-board" type="number" placeholder="1"></div>
                <div class="field"><label>Body (JSON)</label>
                    <textarea id="post-write-body">{
  "title": "첫 번째 게시물",
  "content": "안녕하세요! 첫 번째 게시물입니다."
}</textarea>
                </div>
                <button class="btn-submit" onclick="writePost()">▶ &nbsp;RUN</button>
            </div>
        </div>

        <!-- GET POST LIST -->
        <div class="card">
            <div class="card-head" onclick="toggle(this)">
                <span class="card-method-badge badge-get">GET</span>
                <span class="card-title">게시물 목록 조회</span>
                <span class="card-path">/boards/{boardId}/posts</span>
                <span class="card-toggle">▶</span>
            </div>
            <div class="card-body">
                <div class="field"><label>Board ID</label><input id="post-list-board" type="number" placeholder="1"></div>
                <div class="row">
                    <div class="field"><label>Page</label><input id="post-list-page" type="number" value="1" min="1"></div>
                    <div class="field"><label>Size</label><input id="post-list-size" type="number" value="10" min="1"></div>
                </div>
                <button class="btn-submit" onclick="getPostList()">▶ &nbsp;RUN</button>
            </div>
        </div>

        <!-- GET ONE POST -->
        <div class="card">
            <div class="card-head" onclick="toggle(this)">
                <span class="card-method-badge badge-get">GET</span>
                <span class="card-title">게시물 단건 조회</span>
                <span class="card-path">/boards/{boardId}/posts/{postId}</span>
                <span class="card-toggle">▶</span>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="field"><label>Board ID</label><input id="post-get-board" type="number" placeholder="1"></div>
                    <div class="field"><label>Post ID</label><input id="post-get-id" type="number" placeholder="1"></div>
                </div>
                <button class="btn-submit" onclick="getPost()">▶ &nbsp;RUN</button>
            </div>
        </div>

        <!-- UPDATE POST -->
        <div class="card">
            <div class="card-head" onclick="toggle(this)">
                <span class="card-method-badge badge-put">PUT</span>
                <span class="card-title">게시물 수정</span>
                <span class="card-path">/boards/{boardId}/posts/{postId}</span>
                <span class="card-toggle">▶</span>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="field"><label>Board ID</label><input id="post-update-board" type="number" placeholder="1"></div>
                    <div class="field"><label>Post ID</label><input id="post-update-id" type="number" placeholder="1"></div>
                </div>
                <div class="field"><label>Body (JSON)</label>
                    <textarea id="post-update-body">{
  "title": "수정된 제목",
  "content": "수정된 내용입니다."
}</textarea>
                </div>
                <button class="btn-submit put" onclick="updatePost()">▶ &nbsp;RUN</button>
            </div>
        </div>

        <!-- DELETE POST -->
        <div class="card">
            <div class="card-head" onclick="toggle(this)">
                <span class="card-method-badge badge-del">DEL</span>
                <span class="card-title">게시물 삭제</span>
                <span class="card-path">/boards/{boardId}/posts/{postId}</span>
                <span class="card-toggle">▶</span>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="field"><label>Board ID</label><input id="post-del-board" type="number" placeholder="1"></div>
                    <div class="field"><label>Post ID</label><input id="post-del-id" type="number" placeholder="1"></div>
                </div>
                <button class="btn-submit del" onclick="deletePost()">▶ &nbsp;RUN</button>
            </div>
        </div>

        <!-- 6. MESSAGE -->
        <div class="section-label"><span class="sec-icon">▸</span> 06 &nbsp;MESSAGE</div>

        <!-- SEND MESSAGE -->
        <div class="card">
            <div class="card-head" onclick="toggle(this)">
                <span class="card-method-badge badge-post">POST</span>
                <span class="card-title">쪽지 보내기</span>
                <span class="card-path">/message/send</span>
                <span class="card-toggle">▶</span>
            </div>
            <div class="card-body">
                <div class="field"><label>Body (JSON)</label>
                    <textarea id="msg-send-body">{
  "receiverNickname": "홍길동",
  "content": "안녕하세요!"
}</textarea>
                </div>
                <button class="btn-submit" onclick="sendMessage()">▶ &nbsp;RUN</button>
            </div>
        </div>

        <!-- RECEIVED LIST -->
        <div class="card">
            <div class="card-head" onclick="toggle(this)">
                <span class="card-method-badge badge-get">GET</span>
                <span class="card-title">받은 쪽지함</span>
                <span class="card-path">/message/list</span>
                <span class="card-toggle">▶</span>
            </div>
            <div class="card-body">
                <button class="btn-submit" onclick="getReceivedMessages()">▶ &nbsp;RUN</button>
            </div>
        </div>

        <!-- SENT LIST -->
        <div class="card">
            <div class="card-head" onclick="toggle(this)">
                <span class="card-method-badge badge-get">GET</span>
                <span class="card-title">보낸 쪽지함</span>
                <span class="card-path">/message/sent</span>
                <span class="card-toggle">▶</span>
            </div>
            <div class="card-body">
                <button class="btn-submit" onclick="getSentMessages()">▶ &nbsp;RUN</button>
            </div>
        </div>

        <!-- READ MESSAGE -->
        <div class="card">
            <div class="card-head" onclick="toggle(this)">
                <span class="card-method-badge badge-get">GET</span>
                <span class="card-title">쪽지 읽기</span>
                <span class="card-path">/message/read/{id}</span>
                <span class="card-toggle">▶</span>
            </div>
            <div class="card-body">
                <div class="field"><label>Message ID</label><input id="msg-read-id" type="number" placeholder="1"></div>
                <button class="btn-submit" onclick="readMessage()">▶ &nbsp;RUN</button>
            </div>
        </div>

        <!-- DELETE SENT MSG -->
        <div class="card">
            <div class="card-head" onclick="toggle(this)">
                <span class="card-method-badge badge-del">DEL</span>
                <span class="card-title">보낸 쪽지 삭제</span>
                <span class="card-path">/message/sent/{id}</span>
                <span class="card-toggle">▶</span>
            </div>
            <div class="card-body">
                <div class="field"><label>Message ID</label><input id="msg-del-sent-id" type="number" placeholder="1"></div>
                <button class="btn-submit del" onclick="deleteSentMsg()">▶ &nbsp;RUN</button>
            </div>
        </div>

        <!-- DELETE RECEIVED MSG -->
        <div class="card">
            <div class="card-head" onclick="toggle(this)">
                <span class="card-method-badge badge-del">DEL</span>
                <span class="card-title">받은 쪽지 삭제</span>
                <span class="card-path">/message/received/{id}</span>
                <span class="card-toggle">▶</span>
            </div>
            <div class="card-body">
                <div class="field"><label>Message ID</label><input id="msg-del-recv-id" type="number" placeholder="1"></div>
                <button class="btn-submit del" onclick="deleteReceivedMsg()">▶ &nbsp;RUN</button>
            </div>
        </div>

    </div></div><!-- /left-panel -->

    <!-- ======================== RIGHT PANEL ======================== -->
    <div class="right-panel">
        <div class="console-header">
            <span style="color:var(--accent);font-size:12px">●</span>
            <span style="color:var(--red);font-size:12px">●</span>
            <span style="color:var(--yellow);font-size:12px">●</span>
            <span class="console-title">&nbsp;&nbsp;OUTPUT CONSOLE</span>
            <div class="console-actions">
                <button class="btn-clear" onclick="clearConsole()">CLEAR</button>
            </div>
        </div>
        <div class="console-body" id="console">
            <div class="console-empty" id="consoleEmpty">
                <div class="big">_</div>
                <div>API 요청을 실행하면 응답이 여기에 출력됩니다.</div>
            </div>
        </div>
    </div>

</div><!-- /workspace -->

<script>
    const BASE = '';  // 같은 호스트라면 비워두세요. ex) 'http://localhost:8080'

    /* ====== CONSOLE UTILS ====== */
    function logRequest(method, url, status, isOk, data) {
        const empty = document.getElementById('consoleEmpty');
        if (empty) empty.remove();

        const now = new Date();
        const time = now.toTimeString().split(' ')[0] + '.' + String(now.getMilliseconds()).padStart(3,'0');

        const methodClass = {POST:'method-post',GET:'method-get',PUT:'method-put',DELETE:'method-del'}[method] || 'method-get';
        const body = typeof data === 'object' ? JSON.stringify(data, null, 2) : String(data);

        const entry = document.createElement('div');
        entry.className = `log-entry ${isOk ? 'success' : 'error'}`;
        entry.innerHTML = `
    <div>
      <span class="log-time">${time}</span>
      <span class="log-method ${methodClass}">${method}</span>
      <span class="log-url">${url}</span>
      &nbsp;
      <span class="${isOk ? 'log-status-ok' : 'log-status-err'}">${status}</span>
    </div>
    <div class="log-body ${isOk ? 'ok-body' : 'err-body'}">${escHtml(body)}</div>
  `;
        const con = document.getElementById('console');
        con.appendChild(entry);
        con.scrollTop = con.scrollHeight;
    }

    function logInfo(text) {
        const empty = document.getElementById('consoleEmpty');
        if (empty) empty.remove();
        const entry = document.createElement('div');
        entry.className = 'log-entry info';
        entry.innerHTML = `<div style="color:var(--blue);font-size:11px">ℹ ${text}</div>`;
        const con = document.getElementById('console');
        con.appendChild(entry);
        con.scrollTop = con.scrollHeight;
    }

    function clearConsole() {
        document.getElementById('console').innerHTML =
            '<div class="console-empty" id="consoleEmpty"><div class="big">_</div><div>API 요청을 실행하면 응답이 여기에 출력됩니다.</div></div>';
    }

    function escHtml(s) {
        return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
    }

    /* ====== CARD TOGGLE ====== */
    function toggle(head) {
        const body = head.nextElementSibling;
        const arrow = head.querySelector('.card-toggle');
        body.classList.toggle('visible');
        arrow.classList.toggle('open');
    }

    /* ====== FETCH HELPERS ====== */
    async function api(method, url, body, isForm) {
        const fullUrl = BASE + url;
        const opts = {
            method,
            credentials: 'include',
            headers: {}
        };

        if (body !== undefined) {
            if (isForm) {
                opts.headers['Content-Type'] = 'application/x-www-form-urlencoded';
                opts.body = body;
            } else {
                opts.headers['Content-Type'] = 'application/json';
                opts.body = typeof body === 'string' ? body : JSON.stringify(body);
            }
        }

        try {
            const res = await fetch(fullUrl, opts);
            let data;
            const ct = res.headers.get('content-type') || '';
            if (ct.includes('application/json')) {
                data = await res.json();
            } else {
                data = await res.text();
            }
            logRequest(method, fullUrl, res.status, res.ok, data);
            return { ok: res.ok, status: res.status, data };
        } catch(e) {
            logRequest(method, fullUrl, 'NETWORK ERROR', false, e.message);
            return { ok: false, status: 0, data: e.message };
        }
    }

    function v(id) { return document.getElementById(id)?.value?.trim() || ''; }
    function j(id) { try { return JSON.parse(v(id)); } catch(e) { return v(id); } }

    /* ====== AUTH ====== */
    async function doLogin() {
        const params = new URLSearchParams();
        params.set('username', v('login-username'));
        params.set('password', v('login-password'));
        logInfo('Spring Security formLogin → application/x-www-form-urlencoded');
        await api('POST', '/login', params.toString(), true);
    }

    async function doLogout() {
        const params = new URLSearchParams();
        // CSRF 토큰이 필요하다면 여기에 추가
        logInfo('Spring Security logout → form 전송');
        await api('POST', '/logout', params.toString(), true);
    }

    /* ====== MAIL ====== */
    async function sendMail() {
        const email = v('mail-send-email');
        await api('POST', `/api/mail/send?email=${encodeURIComponent(email)}`);
    }
    async function verifyMail() {
        const email = v('mail-verify-email');
        const code  = v('mail-verify-code');
        await api('POST', `/api/mail/verify?email=${encodeURIComponent(email)}&code=${encodeURIComponent(code)}`);
    }

    /* ====== USER ====== */
    async function signup() {
        await api('POST', '/account/signup', j('signup-body'));
    }
    async function getMyInfo() {
        await api('GET', '/account/user');
    }
    async function sendResetLink() {
        await api('POST', '/account/password/send-link', { email: v('pw-reset-email') });
    }
    async function resetPassword() {
        await api('POST', '/account/password/reset', {
            token: v('pw-reset-token'),
            newPassword: v('pw-reset-newpw')
        });
    }

    /* ====== BOARD ====== */
    async function createBoard() {
        await api('POST', '/boards', j('board-create-body'));
    }
    async function getBoardList() {
        const page = v('board-list-page') || 1;
        const size = v('board-list-size') || 10;
        await api('GET', `/boards?page=${page}&size=${size}`);
    }
    async function getBoard() {
        await api('GET', `/boards/${v('board-get-id')}`);
    }
    async function updateBoard() {
        await api('PUT', `/boards/${v('board-update-id')}`, j('board-update-body'));
    }
    async function deleteBoard() {
        await api('DELETE', `/boards/${v('board-del-id')}`);
    }
    async function getManagers() {
        await api('GET', `/boards/${v('board-mgr-list-id')}/manager`);
    }
    async function addManager() {
        await api('POST', `/boards/${v('board-mgr-add-board')}/manager`, { id: Number(v('board-mgr-add-user')) });
    }
    async function removeManager() {
        await api('DELETE', `/boards/${v('board-mgr-del-board')}/manager`, { id: Number(v('board-mgr-del-user')) });
    }

    /* ====== POST ====== */
    async function writePost() {
        await api('POST', `/boards/${v('post-write-board')}/posts`, j('post-write-body'));
    }
    async function getPostList() {
        const board = v('post-list-board');
        const page  = v('post-list-page') || 1;
        const size  = v('post-list-size') || 10;
        await api('GET', `/boards/${board}/posts?page=${page}&size=${size}`);
    }
    async function getPost() {
        await api('GET', `/boards/${v('post-get-board')}/posts/${v('post-get-id')}`);
    }
    async function updatePost() {
        await api('PUT', `/boards/${v('post-update-board')}/posts/${v('post-update-id')}`, j('post-update-body'));
    }
    async function deletePost() {
        await api('DELETE', `/boards/${v('post-del-board')}/posts/${v('post-del-id')}`);
    }

    /* ====== MESSAGE ====== */
    async function sendMessage() {
        await api('POST', '/message/send', j('msg-send-body'));
    }
    async function getReceivedMessages() {
        await api('GET', '/message/list');
    }
    async function getSentMessages() {
        await api('GET', '/message/sent');
    }
    async function readMessage() {
        await api('GET', `/message/read/${v('msg-read-id')}`);
    }
    async function deleteSentMsg() {
        await api('DELETE', `/message/sent/${v('msg-del-sent-id')}`);
    }
    async function deleteReceivedMsg() {
        await api('DELETE', `/message/received/${v('msg-del-recv-id')}`);
    }
</script>
</body>
</html>